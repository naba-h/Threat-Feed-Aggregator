<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ThreatScope ‚Äì Cyber Threat Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
    margin:0;
    font-family: "Segoe UI",sans-serif;
    background: radial-gradient(circle at top, #0f172a, #020617);
    color:white;
    min-height:100vh;
}
header{
    padding:30px;
    text-align:center;
    font-size:32px;
    font-weight:700;
    letter-spacing:1px;
    color:#22d3ee;
}
.container{
    max-width:900px;
    margin:auto;
    padding:20px;
}
.search-box{
    display:flex;
    gap:15px;
}
input{
    flex:1;
    padding:16px;
    border:none;
    outline:none;
    border-radius:12px;
    background:#020617;
    color:white;
    font-size:18px;
    box-shadow:0 0 10px rgba(34,211,238,0.2);
}
button{
    padding:16px 28px;
    border:none;
    border-radius:12px;
    background:#22d3ee;
    color:black;
    font-weight:700;
    font-size:16px;
    cursor:pointer;
}
button:hover{ background:#67e8f9 }

.result{
    margin-top:40px;
    padding:20px;
    border-radius:16px;
    background:rgba(2,6,23,0.8);
    box-shadow:0 0 25px rgba(34,211,238,.15);
}
#verdict{
    font-size:24px;
    font-weight:bold;
    margin-bottom:20px;
}
.risk-low{color:#4ade80;}
.risk-medium{color:#facc15;}
.risk-high{color:#f87171;}

.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
    gap:15px;
}
.card{
    background:#020617;
    padding:18px;
    border-radius:12px;
    box-shadow:0 0 10px rgba(34,211,238,.15);
    font-size:16px;
}
footer{
    margin-top:40px;
    text-align:center;
    font-size:14px;
    opacity:0.7;
}
</style>
</head>

<body>

<header>ThreatScope ‚Äì Cyber Threat Intelligence</header>

<div class="container">
    <div class="search-box">
        <input id="ip" placeholder="Enter IP address (ex: 8.8.8.8)" />
        <button onclick="scan()">Scan</button>
    </div>

    <div class="result">
        <div id="verdict">Enter an IP to start analysis</div>
        <div class="grid" id="cards"></div>
    </div>

    <footer>
        Powered by Cloudflare Workers ‚Ä¢ VirusTotal ‚Ä¢ AbuseIPDB ‚Ä¢ OTX ‚Ä¢ Shodan
    </footer>
</div>

<script>
async function scan(){
    const ip = document.getElementById("ip").value.trim();
    if(!ip) return;

    document.getElementById("verdict").innerText = "Scanning " + ip + " ‚Ä¶";
    document.getElementById("cards").innerHTML = "";

    try{
        const res = await fetch("https://threat-feed-aggregator.hanfinaba.workers.dev/?ip=" + ip);
        const data = await res.json();

        let riskClass = "risk-low";
        if(data.verdict === "Medium Risk") riskClass = "risk-medium";
        if(data.verdict === "High Risk") riskClass = "risk-high";

        document.getElementById("verdict").innerHTML =
            `<span class="${riskClass}">${data.verdict}</span> | Confidence: ${data.confidence}%`;

        document.getElementById("cards").innerHTML = `
            <div class="card">üåç Country: ${data.sources.virustotal.country}</div>
            <div class="card">üè¢ ASN: ${data.sources.virustotal.asn}</div>
            <div class="card">üß™ VirusTotal Malicious: ${data.sources.virustotal.malicious}</div>
            <div class="card">üö® AbuseIPDB Score: ${data.sources.abuseipdb.score}</div>
            <div class="card">üß† OTX Pulses: ${data.sources.otx.pulses}</div>
            <div class="card">üîç Open Ports: ${data.sources.shodan.ports}</div>
        `;
    }
    catch(err){
        document.getElementById("verdict").innerText = "Backend error or unreachable";
    }
}
</script>

</body>
</html>
