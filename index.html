<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ThreatScope – Cyber Threat Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
    margin:0;
    font-family: 'Segoe UI', sans-serif;
    background:linear-gradient(120deg,#020b17,#05172d);
    color:#e6f1ff;
}
header{
    text-align:center;
    padding:30px;
    font-size:28px;
    color:#00f6ff;
    letter-spacing:2px;
}
.container{
    max-width:900px;
    margin:auto;
    padding:20px;
}
.search-box{
    display:flex;
    gap:10px;
}
input{
    flex:1;
    padding:14px;
    border-radius:8px;
    border:none;
    outline:none;
    font-size:16px;
}
button{
    background:#00f6ff;
    border:none;
    color:#001;
    font-weight:bold;
    padding:14px 22px;
    border-radius:8px;
    cursor:pointer;
}
button:hover{opacity:.8}
.cards{
    margin-top:30px;
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
    gap:15px;
}
.card{
    background:#0b1f38;
    border-radius:12px;
    padding:20px;
    box-shadow:0 0 20px rgba(0,255,255,.1);
}
.card h3{
    color:#00f6ff;
    margin-bottom:8px;
}
.footer{
    margin-top:40px;
    text-align:center;
    opacity:.6;
}
</style>
</head>
<body>

<header>ThreatScope – Cyber Threat Intelligence</header>

<div class="container">

<div class="search-box">
    <input id="ip" placeholder="Enter IP (eg 8.8.8.8)">
    <button onclick="scan()">Scan</button>
</div>

<div id="status" style="margin-top:15px"></div>

<div class="cards" id="result"></div>

<div class="footer">
ThreatScope © 2026 | Cloudflare Workers + VirusTotal + AbuseIPDB + OTX + Shodan
</div>

</div>

<script>
const API = "https://threat-feed-aggregator.hanfinaba.workers.dev";

async function scan(){
    const ip = document.getElementById("ip").value.trim();
    if(!ip){ alert("Enter IP"); return; }

    document.getElementById("status").innerText = "Scanning...";
    document.getElementById("result").innerHTML = "";

    try{
        const r = await fetch(API + "/?ip=" + ip);
        const data = await r.json();

        if(data.error){
            document.getElementById("status").innerText = data.error;
            return;
        }

        document.getElementById("status").innerText = "Scan completed";

        document.getElementById("result").innerHTML = `
        <div class="card"><h3>Threat Score</h3>${data.threat_score}</div>
        <div class="card"><h3>Risk Level</h3>${data.risk}</div>
        <div class="card"><h3>Confidence</h3>${data.confidence}</div>
        <div class="card"><h3>Country</h3>${data.geo.country}</div>
        <div class="card"><h3>ISP</h3>${data.geo.isp}</div>
        <div class="card"><h3>Open Ports</h3>${data.feeds.shodan?.open_ports?.length || 0}</div>
        <div class="card"><h3>VirusTotal</h3>${data.feeds.virustotal?.malicious || 0}</div>
        <div class="card"><h3>AbuseIPDB</h3>${data.feeds.abuseipdb?.abuseConfidenceScore || 0}</div>
        `;

    }catch(e){
        document.getElementById("status").innerText="Backend not reachable";
    }
}
</script>

</body>
</html>
