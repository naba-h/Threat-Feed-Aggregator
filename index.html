<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ThreatScope – Cyber Threat Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
    margin: 0;
    font-family: "Segoe UI", system-ui;
    background: linear-gradient(120deg, #050d18, #081b2e);
    color: white;
}

header {
    padding: 30px;
    text-align: center;
    font-size: 28px;
    color: #00eaff;
    border-bottom: 1px solid #00eaff44;
}

.container {
    max-width: 900px;
    margin: 40px auto;
    padding: 20px;
}

.search-box {
    display: flex;
    gap: 10px;
}

input {
    flex: 1;
    padding: 15px;
    font-size: 16px;
    background: #0b1f33;
    border: 1px solid #00eaff55;
    color: white;
    border-radius: 8px;
}

button {
    padding: 15px 25px;
    background: #00eaff;
    color: #000;
    border: none;
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
}

button:hover {
    background: #00c8d9;
}

.grid {
    margin-top: 30px;
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(200px,1fr));
    gap: 20px;
}

.card {
    background: #0b1f33;
    padding: 20px;
    border-radius: 12px;
    border: 1px solid #00eaff33;
}

.label {
    font-size: 12px;
    color: #00eaffaa;
}

.value {
    font-size: 22px;
    margin-top: 8px;
}

.risk-low { color:#00ff9c }
.risk-medium { color:#ffd000 }
.risk-high { color:#ff4b4b }

footer {
    text-align:center;
    margin-top:40px;
    color:#00eaff88;
    font-size:12px;
}
</style>
</head>

<body>

<header>
ThreatScope – Cyber Threat Intelligence
</header>

<div class="container">
    <div class="search-box">
        <input id="ip" placeholder="Enter IP address e.g. 8.8.8.8">
        <button onclick="scan()">Scan</button>
    </div>

    <div class="grid" id="result">
        <div class="card"><div class="label">Threat Level</div><div class="value">--</div></div>
        <div class="card"><div class="label">Threat Score</div><div class="value">--</div></div>
        <div class="card"><div class="label">Abuse Score</div><div class="value">--</div></div>
        <div class="card"><div class="label">Country</div><div class="value">--</div></div>
        <div class="card"><div class="label">ISP</div><div class="value">--</div></div>
        <div class="card"><div class="label">Open Ports</div><div class="value">--</div></div>
        <div class="card"><div class="label">Confidence</div><div class="value">--</div></div>
    </div>
</div>

<footer>
ThreatScope © 2026 | Powered by Cloudflare Workers, VirusTotal, AbuseIPDB, AlienVault & Shodan
</footer>

<script>
const API = "https://threat-feed-aggregator.hanfinaba.workers.dev";

async function scan(){
    const ip = document.getElementById("ip").value;
    if(!ip) return alert("Enter IP");

    try{
        const res = await fetch(`${API}?ip=${ip}`);
        const data = await res.json();

        if(data.error){
            alert(data.error);
            return;
        }

        const cards = document.querySelectorAll(".value");

        cards[0].innerText = data.risk;
        cards[0].className = "value risk-"+data.risk.toLowerCase();

        cards[1].innerText = data.threat_score;
        cards[2].innerText = data.feeds.abuseipdb?.abuseConfidenceScore ?? 0;
        cards[3].innerText = data.geo.country;
        cards[4].innerText = data.geo.isp;
        cards[5].innerText = data.feeds.shodan?.open_ports?.length ?? 0;
        cards[6].innerText = data.confidence;

    }catch{
        alert("Backend not reachable");
    }
}
</script>

</body>
</html>
