<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>ThreatScope – Cyber Threat Intelligence</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{box-sizing:border-box;font-family:Inter,system-ui;}
body{
margin:0;
background:radial-gradient(circle at top,#021b2b,#000814);
color:#dff;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}

.container{
width:100%;
max-width:1000px;
padding:40px;
}

h1{
text-align:center;
font-size:48px;
color:#36f5ff;
margin-bottom:5px;
letter-spacing:1px;
}

.subtitle{
text-align:center;
color:#9ee;
opacity:.8;
margin-bottom:40px;
}

.search{
display:flex;
gap:10px;
margin-bottom:30px;
}

.search input{
flex:1;
padding:18px;
font-size:18px;
border-radius:12px;
border:none;
outline:none;
background:#021b2b;
color:#36f5ff;
border:2px solid #0ff3;
}

.search button{
padding:18px 32px;
border-radius:12px;
border:none;
background:#36f5ff;
color:#000;
font-size:16px;
font-weight:700;
cursor:pointer;
transition:.2s;
}
.search button:hover{background:#5fffff}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
margin-top:20px;
}

.card{
background:linear-gradient(145deg,#021f33,#00111f);
border-radius:16px;
padding:20px;
border:1px solid #0ff2;
box-shadow:0 0 30px #0ff1;
position:relative;
}

.card h3{
margin:0 0 10px;
font-size:14px;
color:#8ef;
letter-spacing:1px;
text-transform:uppercase;
}

.card .value{
font-size:28px;
font-weight:700;
color:#36f5ff;
}

.risk-high{color:#ff3b3b}
.risk-medium{color:#ffb347}
.risk-low{color:#4cff9f}

.footer{
margin-top:30px;
text-align:center;
font-size:12px;
color:#6aa;
opacity:.7;
}
.error{
margin-top:20px;
text-align:center;
color:#ff6666;
}
</style>
</head>

<body>
<div class="container">
<h1>ThreatScope</h1>
<div class="subtitle">Global Cyber Threat Intelligence Platform</div>

<div class="search">
<input id="ip" placeholder="Enter IP Address e.g. 8.8.8.8" />
<button onclick="scan()">Analyze</button>
</div>

<div id="error" class="error"></div>

<div class="grid">
<div class="card"><h3>Threat Level</h3><div id="verdict" class="value">—</div></div>
<div class="card"><h3>Threat Score</h3><div id="score" class="value">—</div></div>
<div class="card"><h3>Confidence</h3><div id="confidence" class="value">—</div></div>
<div class="card"><h3>Country</h3><div id="country" class="value">—</div></div>
<div class="card"><h3>ISP</h3><div id="isp" class="value">—</div></div>
<div class="card"><h3>Open Ports</h3><div id="ports" class="value">—</div></div>
</div>

<div class="footer">
Powered by Cloudflare Workers · VirusTotal · AbuseIPDB · AlienVault · Shodan
</div>
</div>

<script>
const API = "https://threat-feed-aggregator.hanfibaba.workers.dev";

async function scan(){
const ip = document.getElementById("ip").value.trim();
document.getElementById("error").innerText = "";
if(!ip) return;

try{
const res = await fetch(`${API}/?ip=${ip}`);
const data = await res.json();

if(data.error){
document.getElementById("error").innerText = data.error;
return;
}

document.getElementById("verdict").innerText = data.verdict;
document.getElementById("score").innerText = data.threat_score;
document.getElementById("confidence").innerText = data.confidence + "%";
document.getElementById("country").innerText = data.sources?.virustotal?.country || "N/A";
document.getElementById("isp").innerText = data.sources?.shodan?.isp || "N/A";
document.getElementById("ports").innerText = (data.sources?.shodan?.ports || []).join(", ") || "None";

const verdictEl = document.getElementById("verdict");
verdictEl.className = "value " + 
(data.verdict==="High Risk"?"risk-high":data.verdict==="Medium Risk"?"risk-medium":"risk-low");

}catch(e){
document.getElementById("error").innerText = "Backend unreachable";
}
}
</script>
</body>
</html>
